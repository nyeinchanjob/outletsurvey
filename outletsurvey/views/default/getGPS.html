{{extend 'mylayout.html'}}
<script src="http://maps.google.com/maps/api/js?key=AIzaSyBj6iTbEOvpPuxn8I4jjuRC2Oq4j6m16FU&callback=initMap()" async defer></script>
<script src="{{=URL('static','js/gmaps.js')}}"></script>
<div flex>
<md-content flex layout-fill  layout="column" ng-cloak="" class="body-color">
    <div flex style="margin:10px;" layout="column">
        <md-card name="productDetail">
          <!-- <md-toolbar class="md-warn"> -->
            <md-card-title>
              <md-card-title-text>
                <span class="md-title" flex>{{=response.moduleTitle}}</span>
              </md-card-title-text>
            </md-card-title>
          <!-- </md-toolbar> -->
          <!-- <md-dialog-content> -->
            <md-card-content class="md-dialog-content" layout="column" flex>
                <script src="http://maps.google.com/maps/api/js?key=AIzaSyBj6iTbEOvpPuxn8I4jjuRC2Oq4j6m16FU&callback=initMap()" async defer></script>
                    <script src="{{=URL('static','js/gmaps.js')}}"></script>
                    <div>
                        {{=form.custom.begin}}
                        {{=form.custom.widget.search}}{{=form.custom.submit}}
                        {{=form.custom.end}}
                    </div>
                    {{if longitude or latitude:}}
                    <p>latitude, longtitude: {{=latitude}},{{=longitude}}</p>
                    <div id="map" style="height:400px;width:800px"></div>
            </md-card-content>
          <!-- </md-dialog-content> -->
        </md-card>
    </div>
</md-content>
</div>
<script>
$(document).ready(function(){
  map = new GMaps({
    div: '#map',
    lat: {{=latitude}},
    lng: {{=longitude}}
  });
   map.addMarker({
    lat: {{=latitude}},
    lng: {{=longitude}},
    title: 'Here!',
    infoWindow: {
        content: '<p>{{=request.vars.search}}</p>'
    }
  });
});

var map;
function initMap() {
    map = new google.maps.Map(document.getElementById('map'), {
        center: {lat: 16.8583904, lng: 96.0677832},
        zoom: 8
    });
}
</script>
{{pass}}
